{% extends "api/base.html" %} 
{% load static %} 
{% block title %} Главная {% endblock title %} 

{% block links %}
<script src="https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-with-polyfills-latest.js"></script>
{% endblock links %}

{% block content %}

<nav class="menu">
    <div class="menu__left">
		<a href="/" class="menu__item menu__logo">
			<img src="{% static "images/logo.png" %}" alt="Логотип Яндекс.Диск">
			Яндекс.Диск
		</a>
	</div>

    <div class="menu__right">
      <p>Получить публичный ключ:</p>
      <p class="menu__right" id="yandexBtn">
      </p>
  
    </div>

</nav>

{% endblock content %}


{% block scripts %}
<script>
window.addEventListener("DOMContentLoaded", () => {
   window.YaAuthSuggest.init({
         client_id: '5b92a3ed3922473db8837fe35791ad90',
         response_type: 'token',
         redirect_uri: 'http://127.0.0.1:8000/token'
      },
      'http://127.0.0.1:8000', 
      {
         view: 'button',
         parentId: 'yandexBtn',
         buttonView: 'main',
         buttonTheme: 'light',
         buttonSize: 'm',
         buttonBorderRadius: 10
      }
   )
   .then(function(result) {
      return result.handler()
   })
   .catch(function(error) {
      console.log('Что-то пошло не так: ', error);
   });


   const token = localStorage.getItem('yandex_oauth_token');
   console.log(token);

});



</script>
{% endblock scripts %}

